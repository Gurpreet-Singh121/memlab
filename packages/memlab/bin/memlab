#!/usr/bin/env node --expose-gc --max-old-space-size=4096

/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @emails oncall+ws_labs
 * @format
 */

var path = require('path');
var e2e = require('@memlab/e2e');
var heapAnalysis = require('@memlab/heap-analysis');
var api = require('@memlab/api');
var core = require('@memlab/core');
var cli = require("@memlab/cli");
// require all sub-packages to register package information
Promise.all([
    core.PackageInfoLoader.registerPackage(path.join(__dirname, '..')),
    core.registerPackage(),
    cli.registerPackage(),
    api.registerPackage(),
    heapAnalysis.registerPackage(),
    e2e.registerPackage(),
]).then(() => {
    cli.run();
});
